# eInk display support for imx93-jaguar-eink
# Optimized graphics configuration for eInk displays

# === Core DRM Framework ===
CONFIG_DRM=y
CONFIG_DRM_KMS_HELPER=y
CONFIG_DRM_GEM_DMA_HELPER=y
CONFIG_DRM_KMS_FB_HELPER=y

# === Display Panel Support ===
CONFIG_DRM_PANEL=y
CONFIG_DRM_PANEL_SIMPLE=y
CONFIG_DRM_PANEL_ORIENTATION_QUIRKS=y

# === i.MX Display Controllers ===
CONFIG_DRM_IMX=y
CONFIG_DRM_IMX_DCSS=y
CONFIG_DRM_IMX_LCDIF=y
CONFIG_DRM_IMX_PARALLEL=y

# === Display Processing Units ===
CONFIG_IMX_DPU_CORE=y
CONFIG_IMX_LCDIF_CORE=y
CONFIG_IMX_DCSS_CORE=y

# === Framebuffer Support ===
CONFIG_FB=y
CONFIG_FB_MODE_HELPERS=y
CONFIG_FB_CFB_FILLRECT=y
CONFIG_FB_CFB_COPYAREA=y
CONFIG_FB_CFB_IMAGEBLIT=y
CONFIG_FB_DEFERRED_IO=y

# === Console Support ===
CONFIG_FRAMEBUFFER_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY=y

# === Essential Graphics Memory Management ===
CONFIG_DMA_CMA=y
CONFIG_CMA=y
CONFIG_CMA_SIZE_MBYTES=64

# === Common eInk Display Controllers ===
# Disable unused SSD controllers to prevent kernel warnings
# CONFIG_FB_SSD1307 is not set  # Not used on this board
# CONFIG_FB_SSD1351 is not set  # Not used on this board
CONFIG_FB_ST7586=y   # eInk controller
CONFIG_FB_HX8357D=y  # TFT/eInk controller

# === SPI Display Support (E-Ink uses SPI interface) ===
CONFIG_FB_TFT=y
CONFIG_FB_TFT_FBTFT_DEVICE=y

# E-Ink specific SPI display drivers
CONFIG_FB_TFT_ST7586=y    # ST7586 E-Ink controller
CONFIG_FB_TFT_UC1701=y    # UC1701 monochrome display controller
CONFIG_FB_TFT_SSD1322=y   # SSD1322 grayscale OLED (can work with E-Ink)

# Additional controllers that might work with Spectra 6 displays
CONFIG_FB_TFT_SSD1680=y   # SSD1680 E-Ink controller
CONFIG_FB_TFT_UC8151=y    # UC8151 tri-color E-Ink controller
CONFIG_FB_TFT_IL0373=y    # IL0373 flexible E-Ink controller

# Generic EPD (Electronic Paper Display) support
CONFIG_FB_EPD=y           # Generic E-Paper display support
CONFIG_FB_DEFERRED_IO=y   # Required for E-Ink displays

# Disable unused SSD TFT drivers to prevent warnings
# CONFIG_FB_TFT_SSD1306 is not set  # Not used - prevents "no spi_device_id" warning
# CONFIG_FB_TFT_SSD1331 is not set  # Not used - prevents "no spi_device_id" warning  
# CONFIG_FB_TFT_SSD1351 is not set  # Not used - prevents "no spi_device_id" warning

# === Backlight Support (if needed) ===
CONFIG_BACKLIGHT_CLASS_DEVICE=y
CONFIG_BACKLIGHT_PWM=y
CONFIG_BACKLIGHT_GPIO=y

# === Logo Support (optional) ===
CONFIG_LOGO=n  # Disable boot logo for faster boot

# === Remove 3D/Gaming Graphics ===
CONFIG_DRM_ETNAVIV=n
CONFIG_DRM_VIVANTE=n
CONFIG_MXC_GPU_VIV=n

# === Remove Video/TV Output ===
CONFIG_DRM_IMX_TVE=n
CONFIG_DRM_IMX_HDMI=n
CONFIG_DRM_DW_HDMI_IMX=n

# === Disable Heavy Graphics Features ===
CONFIG_DRM_LEGACY=n
CONFIG_DRM_FBDEV_EMULATION=y
CONFIG_DRM_FBDEV_OVERALLOC=100
