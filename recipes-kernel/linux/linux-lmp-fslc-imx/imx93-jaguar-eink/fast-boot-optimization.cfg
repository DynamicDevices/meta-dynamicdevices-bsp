# Fast boot kernel configuration for imx93-jaguar-eink
# Optimize kernel for fastest possible boot time

# === Boot Speed Optimizations ===

# Reduce kernel log verbosity during boot
CONFIG_PRINTK=y
CONFIG_EARLY_PRINTK=n
CONFIG_PRINTK_TIME=n

# Keep essential IPC features for systemd
CONFIG_SYSVIPC=y
CONFIG_POSIX_MQUEUE=y

# Optimize scheduler for boot performance
CONFIG_PREEMPT_VOLUNTARY=y
CONFIG_PREEMPT=n
CONFIG_PREEMPT_RT=n

# Fast RCU configuration
CONFIG_RCU_FANOUT=64
CONFIG_RCU_BOOST=n

# Optimize timers
CONFIG_HZ_250=y
CONFIG_HZ_1000=n
CONFIG_HZ=250

# Skip unnecessary drivers during early boot
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y

# Fast filesystem options
CONFIG_EXT4_FS=y
CONFIG_EXT4_USE_FOR_EXT2=y
CONFIG_EXT4_USE_FOR_EXT23=y

# === Skip Hardware Detection ===
# These can be loaded as modules later if needed

# Graphics support (needed for eInk display)
# Note: Keep graphics built-in for eInk functionality
CONFIG_DRM=y
CONFIG_FB=y

# Network drivers as modules (load after boot)
CONFIG_ETHERNET=y

# === Memory Optimizations ===
CONFIG_SLUB=y
CONFIG_SLAB=n
CONFIG_SLOB=n

# === Reduce Debug Features (but keep essentials) ===
CONFIG_DEBUG_KERNEL=n
CONFIG_DEBUG_INFO=n
CONFIG_KALLSYMS=y  # Keep for systemd
CONFIG_DEBUG_FS=y  # Keep for systemd

# === Fast Storage ===
CONFIG_SCSI=y
CONFIG_BLK_DEV_SD=y
CONFIG_MMC=y
CONFIG_MMC_BLOCK=y

# === Essential but fast drivers ===
CONFIG_SERIAL_FSL_LPUART=y
CONFIG_SERIAL_FSL_LPUART_CONSOLE=y
CONFIG_SERIAL_FSL_LPUART_NR_UARTS=8
