# Safe kernel boot parameters for imx93-jaguar-eink
# Boot optimizations WITHOUT dangerous CPU isolation
# MODIFIED VERSION: Removed dangerous CPU isolation that caused boot failures

# === CPU Power Management (SAFE) ===
CONFIG_NO_HZ=y
CONFIG_NO_HZ_COMMON=y
CONFIG_NO_HZ_IDLE=y
# CONFIG_NO_HZ_FULL is not set        # DANGEROUS - Removed (enables full dynticks)

# === RCU Optimizations (SAFE) ===
CONFIG_RCU_NOCB_CPU=y
# CONFIG_RCU_NOCB_CPU_DEFAULT_ALL is not set  # DANGEROUS - Removed (isolates all CPUs)
CONFIG_RCU_NOCB_CPU_CB_BOOST=y

# === CPU Isolation Support (DISABLED) ===
# CONFIG_CPU_ISOLATION is not set     # DANGEROUS - Removed (CPU isolation infrastructure)

# === IRQ Management (SAFE) ===
CONFIG_IRQ_FORCED_THREADING=y
CONFIG_IRQ_FORCED_THREADING_DEFAULT=y

# === Scheduler Optimizations (DISABLED) ===
# CONFIG_SCHED_ISOLATION is not set   # DANGEROUS - Removed (scheduler isolation)

# === Memory Management Optimizations (SAFE) ===
CONFIG_COMPACTION=n
CONFIG_MIGRATION=n
CONFIG_TRANSPARENT_HUGEPAGE=n

# === Reduce Kernel Overhead (SAFE) ===
CONFIG_SLUB_DEBUG=n
CONFIG_DEBUG_PREEMPT=n

# === Timer Optimizations (SAFE) ===
CONFIG_HIGH_RES_TIMERS=y
CONFIG_GENERIC_CLOCKEVENTS=y

# === Power Management (SAFE) ===
CONFIG_PM_ADVANCED_DEBUG=y  # Enable debug for power optimization
CONFIG_PM_DEBUG=y           # Enable PM debug messages  
CONFIG_PM_TRACE=y           # Enable PM trace events

# === SAFETY NOTES ===
# This config removes the dangerous CPU isolation infrastructure that caused
# boot failures in Build 2213+. The original advanced-boot-params.cfg enabled:
# - CONFIG_NO_HZ_FULL=y (full dynticks - dangerous with isolcpus kernel args)
# - CONFIG_RCU_NOCB_CPU_DEFAULT_ALL=y (RCU no-callback all CPUs - dangerous)
# - CONFIG_CPU_ISOLATION=y (CPU isolation infrastructure - dangerous)
# - CONFIG_SCHED_ISOLATION=y (scheduler isolation - dangerous)
#
# These configs work together with isolcpus= kernel arguments to isolate CPUs.
# When ALL CPUs are isolated (isolcpus=0-3 on 4-core system), the system
# cannot boot because no CPUs are available for kernel tasks.





