# Suspend/Resume Debug Configuration for Power Optimization
# Enables detailed debugging of suspend/resume cycles and wakeup sources
# Only enabled when power optimization features are active

# === Core Suspend Debugging ===
CONFIG_PM_DEBUG=y                    # Enable power management debugging
CONFIG_PM_ADVANCED_DEBUG=y           # Enable advanced PM debugging
CONFIG_PM_SLEEP_DEBUG=y              # Enable suspend/resume debugging
CONFIG_SUSPEND_DEBUG=y               # Enable suspend state debugging
CONFIG_PM_TRACE=y                    # Enable PM trace events
CONFIG_PM_TRACE_RTC=y                # Enable RTC-based PM tracing

# === Console Debugging (Critical for seeing wake sources) ===
CONFIG_CONSOLE_SUSPEND=n             # Keep console active during suspend for debugging
CONFIG_SERIAL_FSL_LPUART_CONSOLE=y   # Ensure UART console stays active

# === Wakeup Source Debugging ===
CONFIG_PM_WAKELOCKS=y                # Enable wakelock debugging
CONFIG_PM_WAKELOCKS_LIMIT=100        # Limit number of wakelocks
CONFIG_PM_WAKELOCKS_GC=y             # Enable wakelock garbage collection

# === IRQ and Timer Debugging ===
CONFIG_GENERIC_IRQ_DEBUGFS=y         # Enable IRQ debugging via debugfs
CONFIG_DEBUG_TIMEKEEPING=y           # Debug timekeeping during suspend

# === Runtime PM Debugging ===
CONFIG_PM_RUNTIME=y                  # Enable runtime power management
CONFIG_PM_RUNTIME_CLK=y              # Enable runtime PM clock management

# === Device PM Debugging ===
CONFIG_PM_GENERIC_DOMAINS=y          # Enable power domain debugging
CONFIG_PM_GENERIC_DOMAINS_SLEEP=y    # Enable power domain sleep debugging
CONFIG_PM_GENERIC_DOMAINS_OF=y       # Enable device tree power domain support

# === Kernel Command Line Options for Runtime ===
# These can be added to bootargs for additional debugging:
# no_console_suspend - Keep console active during suspend
# pm_debug_messages - Enable PM debug messages at runtime
# initcall_debug - Show device suspend/resume timing
# suspend.pm_test_delay=5 - Add delays for debugging

# === DebugFS Support ===
CONFIG_DEBUG_FS=y                    # Enable debugfs for PM debugging
CONFIG_PM_GENERIC_DOMAINS_DEBUGFS=y  # Enable power domain debugfs interface

# === Tracing Support ===
CONFIG_FTRACE=y                      # Enable function tracing
CONFIG_DYNAMIC_FTRACE=y              # Enable dynamic function tracing
CONFIG_FUNCTION_TRACER=y             # Enable function tracer
CONFIG_IRQSOFF_TRACER=y              # Trace IRQ-off latencies
CONFIG_PREEMPT_TRACER=y              # Trace preemption latencies
