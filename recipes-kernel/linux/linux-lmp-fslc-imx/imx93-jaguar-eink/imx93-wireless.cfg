# iMX93 Wireless Connectivity Configuration for E-Ink Board
# Consolidated from: iw612-wifi.cfg, iw612-bluetooth.cfg, 
# wifi-priority.cfg, regulatory-database.cfg
#
# Optimized for ublox MAYA W2 module (IW612 chipset)
# WiFi + Bluetooth connectivity with power optimization

# === Core Networking ===
CONFIG_NET=y
CONFIG_INET=y
CONFIG_NET_CORE=y          # Network core built-in
CONFIG_NETDEVICES=y        # Network devices built-in
# Note: NETFILTER moved to imx93-core-system.cfg to avoid Docker config conflicts
CONFIG_NET_RX_BUSY_POLL=y  # Reduce network latency
CONFIG_TLS=y               # TLS for secure downloads

# === WiFi Core Support ===
CONFIG_CFG80211=y                    # WiFi configuration built-in
CONFIG_CFG80211_WEXT=y               # Wireless extensions support
CONFIG_CFG80211_DEFAULT_PS=y         # Enable power save by default
CONFIG_CFG80211_DEBUGFS=y            # Enable debugfs for WiFi
CONFIG_CFG80211_CRDA_SUPPORT=y       # CRDA regulatory support

# 802.11 MAC layer
CONFIG_MAC80211=y                    # 802.11 stack built-in
CONFIG_MAC80211_HAS_RC=y
CONFIG_MAC80211_RC_MINSTREL=y
CONFIG_MAC80211_LEDS=y               # LED support for WiFi activity

# === NXP IW612 WiFi Support ===
CONFIG_WLAN=y              # Wireless LAN built-in
CONFIG_WLAN_VENDOR_NXP=y   # NXP vendor support built-in

# NXP WiFi drivers for IW612 (MAYA W2 module)
CONFIG_NXP_WIFI_SDIO=y     # SDIO interface built-in
CONFIG_MOAL=m              # NXP WiFi driver as module
CONFIG_MLAN=m              # NXP WiFi core as module

# WiFi embedded support
CONFIG_WIFI_EMBEDDED_SDI=y # Embedded WiFi support built-in
CONFIG_WIFI_EMBEDDED_SDI_FW=y

# === Bluetooth Support ===
CONFIG_BT=y                           # Bluetooth support
CONFIG_BT_BREDR=y                     # Bluetooth Classic support
CONFIG_BT_RFCOMM=y                    # RFCOMM protocol support
CONFIG_BT_RFCOMM_TTY=y                # RFCOMM TTY support
CONFIG_BT_BNEP=y                      # BNEP protocol support
CONFIG_BT_BNEP_MC_FILTER=y            # BNEP multicast filtering
CONFIG_BT_BNEP_PROTO_FILTER=y         # BNEP protocol filtering
CONFIG_BT_HIDP=y                      # HIDP protocol support
CONFIG_BT_LE=y                        # Bluetooth Low Energy support

# Bluetooth HCI drivers
CONFIG_BT_HCIBTUSB=y                  # USB Bluetooth support
CONFIG_BT_HCIUART=y                   # UART Bluetooth support
CONFIG_BT_HCIUART_SERDEV=y            # SerDev UART support
CONFIG_BT_HCIUART_LL=y                # Low level UART support

# NXP Bluetooth support for IW612
CONFIG_BT_HCIUART_NXP=y               # NXP UART Bluetooth driver
CONFIG_BT_NXP=y                       # NXP Bluetooth support

# === Wireless Power Management ===
# Power save configuration for WiFi
CONFIG_MAC80211_RC_DEFAULT="minstrel_ht"
CONFIG_MAC80211_RC_DEFAULT_MINSTREL=y

# Network power management
CONFIG_WIRELESS_EXT=y
CONFIG_WEXT_CORE=y
CONFIG_WEXT_PROC=y
CONFIG_WEXT_SPY=y
CONFIG_WEXT_PRIV=y

# === Regulatory Database Support ===
# Wireless regulatory database
CONFIG_CFG80211_REQUIRE_SIGNED_REGDB=y
CONFIG_CFG80211_USE_KERNEL_REGDB_KEYS=y
CONFIG_CFG80211_EXTRA_REGDB_KEYDIR=""

# Regional support
CONFIG_CFG80211_CERTIFICATION_ONUS=y

# === WiFi Priority Optimization ===
# Network stack optimizations for fast image downloads
CONFIG_NET_SCHED=y                   # Packet scheduling
CONFIG_NET_SCH_FQ_CODEL=y            # Fair queuing with CoDel AQM
CONFIG_NET_CLS=y                     # Packet classification
CONFIG_NET_CLS_BASIC=y               # Basic packet classifier

# TCP optimizations
CONFIG_TCP_CONG_CUBIC=y              # CUBIC TCP congestion control
CONFIG_DEFAULT_TCP_CONG="cubic"
CONFIG_TCP_CONG_ADVANCED=y

# Network buffer optimization
CONFIG_NET_RX_BUSY_POLL=y            # Busy polling for low latency
CONFIG_BQL=y                         # Byte queue limits

# === Security and Encryption ===
CONFIG_CRYPTO=y
CONFIG_CRYPTO_AES=y                  # AES encryption
CONFIG_CRYPTO_CBC=y                  # CBC mode
CONFIG_CRYPTO_ECB=y                  # ECB mode
CONFIG_CRYPTO_SHA1=y                 # SHA1 hash
CONFIG_CRYPTO_SHA256=y               # SHA256 hash
CONFIG_CRYPTO_MD5=y                  # MD5 hash (legacy support)

# WPA/WPA2 security
CONFIG_CRYPTO_ARC4=y                 # RC4 for WEP (legacy)
CONFIG_CRYPTO_MICHAEL_MIC=y          # TKIP MIC

# === Network Protocols ===
CONFIG_IP_MULTICAST=y                # Multicast support
CONFIG_IP_ADVANCED_ROUTER=y          # Advanced routing
CONFIG_IP_MULTIPLE_TABLES=y          # Multiple routing tables

# IPv6 support (minimal)
CONFIG_IPV6=y
CONFIG_IPV6_ROUTER_PREF=y
CONFIG_IPV6_ROUTE_INFO=y

# === Firmware Loading ===
CONFIG_FW_LOADER=y                   # Firmware loading support
CONFIG_FW_LOADER_USER_HELPER=y       # User helper for firmware loading
CONFIG_EXTRA_FIRMWARE=""             # No built-in firmware
CONFIG_FW_LOADER_COMPRESS=y          # Compressed firmware support

# === Network Device Features ===
# Note: Docker networking support moved to imx93-core-system.cfg to avoid conflicts
CONFIG_VLAN_8021Q=n                  # VLAN support not needed
CONFIG_BONDING=n                     # Network bonding not needed
CONFIG_TUN=n                         # TUN/TAP not needed for basic operation

# === Wireless Tools Support ===
CONFIG_WIRELESS_EXT=y                # Wireless extensions
CONFIG_WEXT_CORE=y                   # Wireless extensions core
CONFIG_WEXT_PROC=y                   # /proc/net/wireless
CONFIG_WEXT_SPY=y                    # Wireless spy support
CONFIG_WEXT_PRIV=y                   # Private wireless extensions

# === Debug Support ===
CONFIG_MAC80211_DEBUGFS=y            # 802.11 debugfs support
CONFIG_CFG80211_DEBUGFS=y            # cfg80211 debugfs support
CONFIG_CFG80211_DEVELOPER_WARNINGS=y # Developer warnings
