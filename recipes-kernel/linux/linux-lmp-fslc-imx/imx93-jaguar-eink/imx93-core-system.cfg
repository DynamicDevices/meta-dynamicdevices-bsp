# iMX93 Core System Configuration for E-Ink Board
# Consolidated from: drivers-essential-only.cfg, disable-unused-features.cfg, 
# kernel-config-cleanup.cfg, imx9-soc-fixes.cfg, cortex-m33-support.cfg
# 
# This file contains all essential drivers, disabled unused features,
# iMX93 SoC fixes, and Cortex-M33 support for the E-Ink board

# === Essential System Drivers ===
CONFIG_SERIAL=y
CONFIG_SERIAL_FSL_LPUART=y
CONFIG_SERIAL_FSL_LPUART_CONSOLE=y
CONFIG_SERIAL_CORE=y
CONFIG_SERIAL_CORE_CONSOLE=y

# GPIO Support (essential for E-Ink board)
CONFIG_GPIOLIB=y
CONFIG_GPIO_SYSFS=y
CONFIG_GPIO_MXC=y
CONFIG_GPIO_GENERIC=y

# === Graphics/Display for E-Ink (Framebuffer only) ===
# E-Ink displays use SPI + framebuffer, not DRM
CONFIG_DRM=n
CONFIG_DRM_KMS_HELPER=n
CONFIG_DRM_GEM_DMA_HELPER=n
CONFIG_DRM_PANEL=n
CONFIG_DRM_BRIDGE=n
CONFIG_DRM_PANEL_SIMPLE=n
CONFIG_DRM_IMX=n
CONFIG_DRM_IMX_DCSS=n
CONFIG_DRM_IMX_LCDIF=n
CONFIG_DRM_IMX_PARALLEL=n
CONFIG_IMX_DPU_CORE=n
CONFIG_IMX_LCDIF_CORE=n
CONFIG_IMX_DCSS_CORE=n

# ARM Mali GPU drivers (not present on iMX93)
CONFIG_DRM_PANFROST=n         # ARM Mali Midgard/Bifrost GPUs
CONFIG_DRM_LIMA=n             # ARM Mali 400/450 GPUs  
CONFIG_DRM_ETNAVIV=n          # Vivante GPU driver

# Basic framebuffer support (essential for E-Ink)
CONFIG_FB=y
CONFIG_FB_MODE_HELPERS=y
CONFIG_FB_CFB_FILLRECT=y
CONFIG_FB_CFB_COPYAREA=y
CONFIG_FB_CFB_IMAGEBLIT=y
CONFIG_FB_DEFERRED_IO=y
CONFIG_FB_SYS_FILLRECT=y
CONFIG_FB_SYS_COPYAREA=y
CONFIG_FB_SYS_IMAGEBLIT=y
CONFIG_FB_SYS_FOPS=y

# === Memory Management ===
CONFIG_MMC=y
CONFIG_MMC_BLOCK=y
CONFIG_MMC_SDHCI=y
CONFIG_MMC_SDHCI_PLTFM=y
CONFIG_MMC_SDHCI_ESDHC_IMX=y

# === I2C Support (essential for E-Ink board) ===
CONFIG_I2C=y
CONFIG_I2C_CHARDEV=y
CONFIG_I2C_IMX=y

# === SPI Support (essential for E-Ink display) ===
CONFIG_SPI=y
CONFIG_SPI_IMX=y
CONFIG_SPI_SPIDEV=y

# === USB Support ===
CONFIG_USB=y
CONFIG_USB_COMMON=y
CONFIG_USB_SUPPORT=y
CONFIG_USB_ARCH_HAS_HCD=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_EHCI_MXC=y
CONFIG_USB_CHIPIDEA=y
CONFIG_USB_CHIPIDEA_UDC=y
CONFIG_USB_CHIPIDEA_HOST=y

# === Clocks and Regulators ===
CONFIG_COMMON_CLK=y
CONFIG_REGULATOR=y
CONFIG_REGULATOR_FIXED_VOLTAGE=y
CONFIG_REGULATOR_GPIO=y

# === Disabled Unused Features ===
# Graphics acceleration (not needed for E-Ink)
CONFIG_DRM_MSM=n              # Qualcomm Adreno GPU
CONFIG_DRM_TEGRA=n            # NVIDIA Tegra GPU
CONFIG_DRM_NOUVEAU=n          # NVIDIA GPU driver
CONFIG_DRM_RADEON=n           # AMD Radeon GPU
CONFIG_DRM_AMDGPU=n           # AMD GPU driver
CONFIG_DRM_I915=n             # Intel graphics
CONFIG_DRM_XE=n               # Intel Xe graphics
CONFIG_DRM_V3D=n              # Broadcom V3D GPU
CONFIG_DRM_VC4=n              # Broadcom VideoCore IV
CONFIG_DRM_ROCKCHIP=n         # Rockchip GPU
CONFIG_DRM_MEDIATEK=n         # MediaTek GPU
CONFIG_DRM_TILCDC=n           # TI LCDC
CONFIG_DRM_STI=n              # STMicroelectronics
CONFIG_DRM_ATMEL_HLCDC=n      # Atmel HLCDC
CONFIG_DRM_MXSFB=n            # MXS framebuffer

# Network drivers not present on iMX93
CONFIG_NET_VENDOR_INTEL=n     # Intel network adapters
CONFIG_NET_VENDOR_REALTEK=n   # Realtek network adapters  
CONFIG_NET_VENDOR_BROADCOM=n  # Broadcom network adapters
CONFIG_NET_VENDOR_MARVELL=n   # Marvell network adapters

# USB controllers not present
CONFIG_USB_XHCI_PCI=n         # PCIe xHCI controller
CONFIG_USB_EHCI_PCI=n         # PCIe EHCI controller
CONFIG_USB_OHCI_PCI=n         # PCIe OHCI controller

# PCIe support (iMX93 has no PCIe)
CONFIG_PCI=n                  # PCI bus support
CONFIG_PCIEPORTBUS=n          # PCIe port services
CONFIG_PCIEASPM=n             # PCIe ASPM support

# Wireless drivers not present
CONFIG_ATH_CARDS=n            # Atheros wireless
CONFIG_IWLWIFI=n              # Intel wireless
CONFIG_RTL_CARDS=n            # Realtek wireless
CONFIG_BRCMFMAC_PCIE=n        # Broadcom PCIe wireless

# Storage controllers not present
CONFIG_ATA=n                  # SATA/PATA support
CONFIG_SATA_AHCI=n            # AHCI SATA
CONFIG_NVME_CORE=n            # NVMe storage

# Power management conflicts
CONFIG_INTEL_IDLE=n           # Intel idle driver
CONFIG_ACPI=n                 # ACPI support (ARM uses device tree)
CONFIG_X86_INTEL_PSTATE=n     # Intel P-state driver

# CPU architecture specific
CONFIG_X86_64=n               # x86_64 architecture
CONFIG_X86=n                  # x86 architecture  
CONFIG_MIPS=n                 # MIPS architecture
CONFIG_RISCV=n                # RISC-V architecture

# Virtualization (not needed for embedded)
CONFIG_VIRTUALIZATION=n       # Virtualization support
CONFIG_KVM=n                  # Kernel Virtual Machine
CONFIG_XEN=n                  # Xen hypervisor

# === iMX93 SoC Specific Fixes ===
# Fix for iMX93 11x11 EVK compatibility
CONFIG_IMX_WEIM=y
CONFIG_IMX_SDMA=y

# iMX93 specific pinctrl
CONFIG_PINCTRL_IMX93=y
CONFIG_PINCTRL_IMX=y

# iMX93 clock support
CONFIG_CLK_IMX93=y

# === Cortex-M33 Support ===
# Remote processor framework for Cortex-M33 core
CONFIG_REMOTEPROC=y
CONFIG_IMX_REMOTEPROC=y

# Mailbox support for inter-core communication
CONFIG_MAILBOX=y
CONFIG_IMX_MBOX=y

# Shared memory support
CONFIG_RPMSG=y
CONFIG_RPMSG_VIRTIO=y

# === Security and NVMEM ===
CONFIG_NVMEM=y
CONFIG_NVMEM_SYSFS=y
CONFIG_NVMEM_IMX_OCOTP=y

# === Essential Kernel Features ===
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y
CONFIG_SYSFS=y
CONFIG_PROC_FS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y
