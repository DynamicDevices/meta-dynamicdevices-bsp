# Battery power optimization for imx93-jaguar-eink E-Ink board
# Optimizes module loading for 5-year battery life operation
# Strategy: Essential components built-in, non-essential as modules for power savings

# === WiFi Built-in for Battery-Powered Operation ===
# WiFi must be immediately available to minimize active time and maximize battery life
# Overrides: wifi-power-management.cfg (which sets =m)
CONFIG_MOAL=y              # NXP WiFi driver built-in for fast network access
CONFIG_MLAN=y              # NXP WiFi management built-in for fast network access
CONFIG_WIFI_EMBEDDED_SDI=y # WiFi SDIO interface built-in for fast network access

# === Bluetooth as Module for Battery Life ===
# Bluetooth not essential for core operation, load on-demand to save battery power
# Overrides: drivers-essential-only.cfg, iw612-bluetooth.cfg (which set =y)
CONFIG_BT=m                # Bluetooth module - battery power optimization
CONFIG_BT_BREDR=m          # BR/EDR support module - battery power optimization
CONFIG_BT_RFCOMM=m         # RFCOMM protocol module - battery power optimization
CONFIG_BT_HCIUART=m        # UART Bluetooth module - battery power optimization
CONFIG_BT_HCIUART_H4=m     # H4 protocol module - battery power optimization

# === LTE Modem as Module for Battery Life ===
# LTE is backup connectivity, load on-demand to conserve battery power
# Overrides: drivers-essential-only.cfg, lte-modem-support.cfg (which set =y)
CONFIG_USB_ACM=m                     # USB ACM module - battery power optimization
CONFIG_USB_SERIAL_OPTION=m           # LTE modem driver module - battery power optimization
CONFIG_USB_SERIAL_QUALCOMM=m         # Qualcomm modem module - battery power optimization
CONFIG_USB_SERIAL_QCAUX=m            # Qualcomm auxiliary module - battery power optimization

# === CMA Configuration (CONFLICT RESOLUTION) ===
# RESOLVED: Use power-optimized CMA size
# Overrides: eink-display-*.cfg (which set larger values)
CONFIG_CMA_SIZE_MBYTES=16            # Power-optimized CMA size (FINAL)

# === Display Configuration (CONFLICT RESOLUTION) ===
# RESOLVED: Use minimal display configuration for power savings
# Overrides: eink-display-support.cfg (which enables more features)
# CONFIG_DRM_IMX_DCSS is not set     # DCSS not needed for basic E-Ink (FINAL)
# CONFIG_IMX_DPU_CORE is not set     # DPU not needed for E-Ink (FINAL)
# CONFIG_IMX_DCSS_CORE is not set    # DCSS core not needed (FINAL)
# CONFIG_FB_MODE_HELPERS is not set  # Mode helpers not needed (FINAL)

# === 802.15.4 Configuration (CONFLICT RESOLUTION) ===
# RESOLVED: Use minimal 802.15.4 configuration as module
# Overrides: ieee802154-support.cfg (which enables more features)
CONFIG_IEEE802154=m                  # 802.15.4 as module (FINAL)
CONFIG_IEEE802154_SOCKET=m           # 802.15.4 socket as module (FINAL)
CONFIG_IEEE802154_6LOWPAN=m          # 6LoWPAN as module (FINAL)
CONFIG_6LOWPAN=m                     # 6LoWPAN stack as module (FINAL)

# Remove non-essential NHC compression for power savings
# CONFIG_6LOWPAN_NHC_DEST is not set      # Not essential (FINAL)
# CONFIG_6LOWPAN_NHC_FRAGMENT is not set  # Not essential (FINAL)
# CONFIG_6LOWPAN_NHC_HOP is not set       # Not essential (FINAL)
# CONFIG_6LOWPAN_NHC_MOBILITY is not set  # Not essential (FINAL)
# CONFIG_6LOWPAN_NHC_ROUTING is not set   # Not essential (FINAL)

# Keep only essential NHC compression
CONFIG_6LOWPAN_NHC=m                 # NHC compression as module (FINAL)
CONFIG_6LOWPAN_NHC_IPV6=m            # IPv6 NHC as module (FINAL)
CONFIG_6LOWPAN_NHC_UDP=m             # UDP NHC as module (FINAL)

# === Audio Configuration (CONFLICT RESOLUTION) ===
# RESOLVED: Completely disable all audio for power savings
# Overrides any remaining audio configurations
# CONFIG_SOUND is not set             # No audio needed (FINAL)
# CONFIG_SND is not set               # No ALSA needed (FINAL)
# CONFIG_SND_SOC is not set           # No SoC audio needed (FINAL)

# === Network Configuration (CONFLICT RESOLUTION) ===
# RESOLVED: Keep essential networking built-in, optimize others
CONFIG_NET=y                         # Keep networking built-in (FINAL)
CONFIG_INET=y                        # Keep IPv4 built-in (FINAL)
CONFIG_CFG80211=y                    # WiFi configuration built-in (FINAL)
CONFIG_MAC80211=y                    # 802.11 stack built-in (FINAL)

# === Power Management (NO CONFLICTS - CONFIRMED) ===
# All power management configurations are consistent
CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE=y  # Powersave governor (CONFIRMED)
CONFIG_PM_DEVFREQ=y                      # Device frequency scaling (CONFIRMED)
CONFIG_DEVFREQ_GOV_POWERSAVE=y           # DDR powersave governor (CONFIRMED)
