# WiFi power management configuration for IW612 module on imx8mm-jaguar-sentai
# Fixes CMD_RESP: 0x107 block in pre_asleep! error

# Enable WiFi power management in the NXP MOAL driver
CONFIG_MOAL=m
CONFIG_MLAN=m

# Enable advanced power saving features for NXP WiFi
CONFIG_NXP_WIFI_IW612=y
CONFIG_NXP_WIFI_SDIO=y

# MAC80211 power management
CONFIG_MAC80211_HAS_RC=y
CONFIG_MAC80211_RC_MINSTREL=y
CONFIG_MAC80211_RC_DEFAULT_MINSTREL=y
CONFIG_MAC80211_RC_DEFAULT="minstrel_ht"

# Enable wireless power management
CONFIG_CFG80211_WEXT=y
CONFIG_CFG80211=y
CONFIG_WLAN=y

# Enable SDIO power management for WiFi module
CONFIG_MMC_PWRSEQ=y
CONFIG_MMC_PWRSEQ_SIMPLE=y

# Enable wake-on-wireless LAN
CONFIG_CFG80211_WEXT_EXPORT=y

# SDIO wake interrupt support (critical for IW612)
CONFIG_MMC_SDHCI_IO_ACCESSORS=y
CONFIG_MMC_SDHCI_ESDHC_IMX=y

# Power management debugging (can be disabled in production)
CONFIG_PM_DEBUG=y
CONFIG_PM_ADVANCED_DEBUG=y

# Bluetooth power management (shared with WiFi module)
CONFIG_BT=y
CONFIG_BT_HCIUART=y
CONFIG_BT_HCIUART_H4=y
CONFIG_BT_HCIUART_MRVL=y

# Enable runtime power management for SDIO
CONFIG_PM_RUNTIME=y
CONFIG_PM_GENERIC_DOMAINS=y
CONFIG_PM_GENERIC_DOMAINS_SLEEP=y
