From 4e3d958c2512b99faa4bf9fcd7890b0bbbeaa23c Mon Sep 17 00:00:00 2001
From: Dynamic Devices <info@dynamicdevices.co.uk>
Date: Mon, 8 Oct 2025 13:00:00 +0000
Subject: [PATCH] rtc: pcf2127: replace with kernel 6.6 driver for PCF2131 support

Replace the existing PCF2127 driver with the kernel 6.6 version that
includes comprehensive PCF2131 support by Hugo Villeneuve.

This provides:
- Complete PCF2131 device support with proper initialization
- STOP/CPR bit handling for time writes
- OSF flag management
- Device-specific register layouts
- Interrupt handling for PCF2131
- Watchdog support
- Tamper detection

The kernel 6.6 driver is known to work well and includes all the
necessary fixes and enhancements for PCF2131 operation.

Based on upstream kernel 6.6 implementation.

Signed-off-by: Dynamic Devices <info@dynamicdevices.co.uk>
---
 drivers/rtc/rtc-pcf2127.c | 1541 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 1541 insertions(+)

diff --git a/drivers/rtc/rtc-pcf2127.c b/drivers/rtc/rtc-pcf2127.c
index 4e3d958c2512..new-file-from-v6.6 100644
--- a/drivers/rtc/rtc-pcf2127.c
+++ b/drivers/rtc/rtc-pcf2127.c
@@ -1,1026 +1,1541 @@
