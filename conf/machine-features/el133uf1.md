# EL133UF1 Machine Feature

## Overview

The `el133uf1` machine feature enables support for the **Spectra 6 EL133UF1** 13.3-inch E-Ink display.

## Hardware Specifications

- **Display**: Spectra 6 EL133UF1
- **Size**: 13.3 inches
- **Technology**: 6-color E-Ink (Spectra technology)
- **Interface**: SPI
- **Resolution**: TBD (depends on controller)

## Enabled Components

When the `el133uf1` machine feature is present, the following components are automatically included:

### BSP Layer (`meta-dynamicdevices-bsp`)
- **eink-spectra6**: Userspace library and test tools from the eink-spectra6 repository
- **SPI support**: Enhanced SPI configuration for E-Ink communication
- **Kernel drivers**: FB_TFT framework and E-Ink specific controllers

### Distro Layer (`meta-dynamicdevices-distro`)
- **Development tools**: SPI debugging utilities, I2C tools
- **Image processing**: ImageMagick, Python PIL for display content
- **Python support**: python3-spidev, python3-gpiod for scripting
- **Power management**: E-Ink specific power optimization

## Usage

### Machine Configuration

Add the feature to your machine configuration:

```bitbake
MACHINE_FEATURES:append:your-machine = " el133uf1"
```

### Automatic Integration

The feature automatically:
- Includes the eink-spectra6 userspace library
- Enables SPI display support in the kernel
- Adds development and debugging tools
- Configures power management for E-Ink displays

## Current Machines

The following machines currently use this feature:

- `imx93-jaguar-eink`: i.MX93-based E-Ink display platform

## Dependencies

### Kernel Configuration
- `CONFIG_SPI=y` - SPI bus support
- `CONFIG_FB_TFT=y` - TFT/E-Ink framebuffer support
- `CONFIG_FB_EPD=y` - Electronic Paper Display support
- Various E-Ink controller drivers (ST7586, UC1701, SSD1680, etc.)

### Hardware Requirements
- SPI interface for display communication
- GPIO pins for display control (reset, power, etc.)
- Sufficient SPI buffer size (configured via `bufsiz` parameter)

## Repository

The userspace code is maintained in:
- **Repository**: https://github.com/DynamicDevices/eink-spectra6
- **License**: MIT
- **Build System**: Auto-detected (CMake/Makefile)

## Development

For development and testing:

```bash
# Build with E-Ink support
export KAS_MACHINE=imx93-jaguar-eink
./kas-build-base.sh

# Test SPI communication
spidev_test -D /dev/spidev0.0

# Check display framebuffer
fbset -fb /dev/fb0
```

## Future Extensions

This machine feature can be extended to support:
- Additional E-Ink display sizes
- Different Spectra 6 variants
- Multiple display configurations
- Advanced power management features
