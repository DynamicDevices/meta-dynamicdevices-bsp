# Selective I2C configuration for imx93-jaguar-eink
# Keep essential PMIC I2C support, remove peripheral I2C drivers
# This solves SPL overflow while maintaining power management

# === CORE I2C SUPPORT (ESSENTIAL) ===
# Keep basic I2C framework for PMIC communication
CONFIG_I2C=y
CONFIG_DM_I2C=y
CONFIG_SPL_I2C=y

# === PMIC I2C SUPPORT (ESSENTIAL) ===
# Keep PCA9450 PMIC support for power_init_board
CONFIG_POWER=y
CONFIG_SPL_POWER=y
CONFIG_POWER_I2C=y
CONFIG_SPL_POWER_I2C=y
CONFIG_POWER_PCA9450=y

# === I2C CONTROLLER (ESSENTIAL) ===
# Use LPI2C controller for i.MX93 (not legacy MXC I2C)
CONFIG_DM_I2C_IMX_LPI2C=y
CONFIG_SPL_DM_I2C_IMX_LPI2C=y

# === DISABLE LEGACY MXC I2C (INCOMPATIBLE WITH i.MX93) ===
# Legacy MXC I2C driver causes "I2C1_BASE_ADDR undeclared" error on i.MX93
CONFIG_SYS_I2C_MXC=n
CONFIG_SPL_SYS_I2C_MXC=n

# === PERIPHERAL I2C DRIVERS (REMOVE FOR SPL SIZE) ===
# Disable non-essential I2C peripheral drivers
CONFIG_I2C_MUX=n
CONFIG_I2C_MUX_PCA954x=n
CONFIG_I2C_MUX_GPIO=n
CONFIG_DM_I2C_GPIO=n
CONFIG_SYS_I2C_EEPROM=n
CONFIG_I2C_EEPROM=n

# === GPIO EXPANDERS (REMOVE FOR SPL SIZE) ===
# These are handled by MCXC143VFM, not needed in SPL
CONFIG_DM_PCA953X=n
CONFIG_PCA953X=n
CONFIG_PCF8575_GPIO=n

# === SENSORS (REMOVE FOR SPL SIZE) ===
# Temperature/pressure sensors not needed in SPL
CONFIG_DM_I2C_ADI=n
CONFIG_I2C_ADI=n

# === RTC I2C DRIVERS (ALREADY DISABLED) ===
# Keep these disabled as we have separate RTC chip
CONFIG_RTC_PCF2131=n
CONFIG_RTC_PCF2127=n
CONFIG_RTC_DS1307=n
CONFIG_RTC_DS3231=n

# === I2C COMMAND SUPPORT (REMOVE FOR SPL SIZE) ===
# Remove I2C commands to save space
CONFIG_CMD_I2C=n
CONFIG_SPL_CMD_I2C=n

# === STRATEGY SUMMARY ===
# KEEP: Basic I2C framework + PCA9450 PMIC + LPI2C controller (i.MX93)
# REMOVE: Legacy MXC I2C, peripheral drivers, GPIO expanders, sensors, commands
# RESULT: Functional power_init_board with minimal SPL footprint
# FIX: Resolves "I2C1_BASE_ADDR undeclared" error by using correct LPI2C driver
