# Optimized U-Boot configuration for imx93-jaguar-eink
# Replaces enable_boot_profiling.cfg with better approach
# Eliminates boot errors while maintaining fast boot

# Fast boot timing (reasonable delay for debugging)
CONFIG_BOOTDELAY=2
CONFIG_ZERO_BOOTDELAY_CHECK=y

# Enable boot timing measurement (without breaking environment)
CONFIG_BOOTSTAGE=y
CONFIG_BOOTSTAGE_REPORT=y
CONFIG_BOOTSTAGE_FDT=y
CONFIG_SHOW_BOOT_PROGRESS=y

# Optimize for size and speed
CONFIG_LTO=y

# Keep console functional but reduce verbosity
CONFIG_LOGLEVEL=4
CONFIG_SPL_LOGLEVEL=4

# Optimize memory allocation
CONFIG_SYS_MALLOC_LEN=0x2000000

# Skip unnecessary features but keep essential functionality
CONFIG_CMD_BOOTMENU=n
CONFIG_AUTOBOOT_MENU_SHOW=n
CONFIG_BOOTMENU_DELAY=0

# Keep distro boot support for OSTree (required by Foundries.io)
CONFIG_DISTRO_DEFAULTS=y
CONFIG_BOOTCOMMAND="run distro_bootcmd"

# Optimize USB for boot speed (disable storage, keep commands)
CONFIG_USB_STORAGE=n
CONFIG_CMD_USB=y

# Essential features for Jaguar E-Ink board
CONFIG_CMD_I2C=y
CONFIG_CMD_SPI=y
CONFIG_CMD_GPIO=y
CONFIG_CMD_MMC=y
